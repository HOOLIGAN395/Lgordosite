<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>L'gordo - Commande en ligne</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary-bg: #0d1723;
      --secondary: #a27c27;
      --accent: #ffd500;
      --white: #ffffff;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Quicksand', sans-serif;
      background-color: var(--primary-bg);
      color: var(--white);
    }
    header {
      text-align: center;
      padding: 3rem 1rem;
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('couverture-lgordo.jpg') center/cover no-repeat;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    header img { width: 90px; border-radius: 50%; }
    .tabs {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
      flex-wrap: wrap;
    }
    .tabs button {
      background-color: var(--secondary);
      border: none;
      color: var(--white);
      padding: 0.6rem 1.2rem;
      border-radius: 9999px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
    }
    .tabs button:hover {
      background-color: #c99c3d;
    }
    .menu {
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    .category h2 {
      margin-bottom: 1rem;
      color: var(--accent);
      font-size: 1.5rem;
    }
    .product-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 1rem;
    }
    .product {
      background-color: #1a2734;
      padding: 1rem;
      border-radius: 1rem;
      cursor: pointer;
      text-align: center;
      transition: transform 0.2s;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .product:hover { transform: translateY(-4px); }
    .product img {
      width: 100%;
      max-height: 120px;
      object-fit: cover;
      border-radius: 0.75rem;
      margin-bottom: 0.5rem;
    }
    .product h3 {
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
      min-height: 2.2rem;
    }
    .product .description {
      font-size: 0.85rem;
      line-height: 1.2;
      min-height: 2.5rem;
      color: #ccc;
      margin: 0.3rem 0;
    }
    .product .price {
      color: var(--accent);
      font-weight: bold;
      margin-top: 0.3rem;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo L'gordo">
  </header>

  <div class="tabs">
    <button onclick="scrollToCategory('pizza')">üçï Pizza</button>
    <button onclick="scrollToCategory('saroukh')">üåØ Saroukh</button>
    <button onclick="scrollToCategory('pasta')">üçù Pasta</button>
    <button onclick="scrollToCategory('deal')">üéÅ Deal</button>
  </div>

  <main class="menu">
    <div class="category" id="pizza">
      <h2>üçï Pizza</h2>
      <div class="product-list">
        <div class="product" onclick="openModal(this)" data-name="Pizza Carnivore" data-description="Sauce tomate, merguez de b≈ìuf, viande hach√©e de b≈ìuf, pepperoni, oignon, poivrons, champignons, tomates cerises, origan, olive noir, mozzarella" data-price="75" data-image="LaCarnivore.jpg">
          <img src="LaCarnivore.jpg" alt="Pizza Carnivore">
          <h3>Pizza Carnivore</h3>
          <p class="description">Sauce tomate, merguez, viande hach√©e...</p>
          <p class="price">75 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="Pizza Poulet Alfredo" data-description="Sauce blanche, poulet, oignon confit, poivrons confits, champignons, origan, olive noire, mozzarella" data-price="64" data-image="PouletAlfredo.jpg">
          <img src="PouletAlfredo.jpg" alt="Pizza Poulet Alfredo">
          <h3>Pizza Poulet Alfredo</h3>
          <p class="description">Sauce blanche, poulet, l√©gumes...</p>
          <p class="price">64 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="Poulet barbecue" data-description="Base tomate, poulet marin√©, oignons, poivrons, sauce barbecue." data-price="65" data-image="POULETBERBECUE.jpg">
          <img src="POULETBERBECUE.jpg" alt="Poulet barbecue">
          <h3>Poulet barbecue</h3>
          <p class="description">Base tomate, poulet, sauce BBQ...</p>
          <p class="price">65 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="La Kefta" data-description="Sauce tomate, viande hach√©e, oignons, poivrons, champignons, origan, olives, mozzarella." data-price="64" data-image="LAKEFTA.jpg">
          <img src="LAKEFTA.jpg" alt="La Kefta">
          <h3>La Kefta</h3>
          <p class="description">Viande hach√©e, l√©gumes...</p>
          <p class="price">64 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="La Merguez" data-description="Sauce tomate, merguez de b≈ìuf, l√©gumes, mozzarella." data-price="64" data-image="LAMERGUEZ.jpg">
          <img src="LAMERGUEZ.jpg" alt="La Merguez">
          <h3>La Merguez</h3>
          <p class="description">Merguez, l√©gumes...</p>
          <p class="price">64 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="La Pepperoni" data-description="Sauce tomate, pepperoni, l√©gumes, mozzarella." data-price="64" data-image="laPepperoni.jpg">
          <img src="laPepperoni.jpg" alt="La Pepperoni">
          <h3>La Pepperoni</h3>
          <p class="description">Pepperoni, l√©gumes...</p>
          <p class="price">64 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="La 4 Fromages" data-description="Sauce tomate, mozzarella, fromage bleu, gouda, emmental, origan, olive." data-price="65" data-image="la4FROMAGES.jpg">
          <img src="la4FROMAGES.jpg" alt="La 4 Fromages">
          <h3>La 4 Fromages</h3>
          <p class="description">4 fromages, origan...</p>
          <p class="price">65 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="La Fum√©e" data-description="Sauce blanche, dinde fum√©e, oignon confit, champignons, origan, olive noir, mozzarella" data-price="64" data-image="laFum√©e.jpg">
          <img src="laFum√©e.jpg" alt="La Fum√©e">
          <h3>La Fum√©e</h3>
          <p class="description">Dinde fum√©e, champignons...</p>
          <p class="price">64 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="Poulet pesto" data-description="Base fromag√®re, poulet marin√©, mozzarella, sauce pesto maison." data-price="105" data-image="Pouletpesto.jpg">
          <img src="Pouletpesto.jpg" alt="Poulet pesto">
          <h3>Poulet pesto</h3>
          <p class="description">Poulet, pesto, fromage...</p>
          <p class="price">105 DH</p>
        </div>
        <div class="product" onclick="openModal(this)" data-name="Bianca Supr√™me" data-description="Base fromag√®re, poulet marin√©, mozzarella, pepperoni." data-price="105" data-image="BiancaSupr√™me.jpg">
          <img src="BiancaSupr√™me.jpg" alt="Bianca Supr√™me">
          <h3>Bianca Supr√™me</h3>
          <p class="description">Poulet, pepperoni, fromage...</p>
          <p class="price">105 DH</p>
        </div>
      </div>
    </div>

    <div class="category" id="saroukh">
      <h2>üåØ Saroukh</h2>
      <div class="product-list">
        <!-- √Ä remplir plus tard -->
      </div>
    </div>

    <div class="category" id="pasta">
      <h2>üçù Pasta</h2>
      <div class="product-list">
        <!-- √Ä remplir plus tard -->
      </div>
    </div>

    <div class="category" id="deal">
      <h2>üéÅ Deal</h2>
      <div class="product-list">
        <!-- √Ä remplir plus tard -->
      </div>
    </div>
  </main>
  <div id="cart-toggle" onclick="toggleCartPanel()" style="position: fixed; bottom: 1rem; left: 1rem; background: var(--secondary); color: black; border-radius: 9999px; padding: 0.8rem 1.4rem; font-size: 1rem; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3); display: flex; align-items: center; gap: 0.5rem; cursor: pointer; z-index: 2001;">
    <img src="https://img.icons8.com/ios-filled/50/000000/restaurant.png" alt="Panier" style="width: 22px; height: 22px;">
    Voir mon panier 
    <span id="cart-count" style="background: black; color: var(--accent); font-size: 0.75rem; padding: 2px 6px; border-radius: 999px; margin-left: auto;">0</span>
  </div>

  <div class="modal" id="cart-modal" style="display:none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); justify-content: center; align-items: center; z-index: 2000;">
    <div class="modal-content" style="max-width: 500px; width: 90%;">
      <button class="close-btn" onclick="toggleCartPanel()">√ó</button>
      <h2 style="color: var(--accent); text-align: center; margin-bottom: 1rem;">Votre panier</h2>
      <div id="cart-items">
        <p id="empty-cart-msg" style="text-align:center; color:#aaa; font-style:italic;">Votre panier est vide pour le moment üõí</p>
      </div>
      <div class="total" id="total-price">Total : 0 DH</div>
      <button id="whatsapp-cart-btn" class="btn-whatsapp">Commander via WhatsApp</button>
    </div>
  </div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">√ó</button>
      <h2 id="modal-title">Nom du produit</h2>
      <img src="" alt="" id="modal-img" style="width: 100%; border-radius: 1rem; margin-bottom: 1rem; object-fit: cover; max-height: 180px;">
      <p id="modal-description" class="description" style="text-align: center; color: #ccc;">Description ici</p>

      <h2 style="text-align:center; color: var(--accent); font-size: 1.2rem;">Un suppl√©ment ?</h2>

      <!-- Extras (Sodas, Extras, Desserts) ici ‚Äì comme dans ta version actuelle -->

      <button class="btn-whatsapp" style="margin-top: 1rem;" onclick="confirmExtras()">Ajouter au panier</button>
    </div>
  </div>

  <script>
    let selectedExtras = {};
    let cart = [];

    function scrollToCategory(id) {
      const section = document.getElementById(id);
      if (section) section.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function openModal(el) {
      const name = el.getAttribute("data-name");
      const desc = el.getAttribute("data-description");
      const img = el.getAttribute("data-image");
      const price = el.getAttribute("data-price");

      document.getElementById("modal-title").textContent = name;
      document.getElementById("modal-description").textContent = desc;
      document.getElementById("modal-img").src = img;
      document.getElementById("modal").style.display = "flex";

      document.getElementById("modal").dataset.name = name;
      document.getElementById("modal").dataset.price = price;
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    function toggleCartPanel() {
      const modal = document.getElementById('cart-modal');
      modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
    }

    function confirmExtras() {
      const name = document.getElementById("modal").dataset.name;
      const price = parseFloat(document.getElementById("modal").dataset.price);
      const item = { name, price, quantity: 1, extras: [] };
      cart.push(item);
      selectedExtras = {};
      closeModal();
      renderCart();
    }

    function renderCart() {
      const cartCount = document.getElementById("cart-count");
      const whatsappBtn = document.getElementById("whatsapp-cart-btn");
      const cartItems = document.getElementById("cart-items");
      const totalPrice = document.getElementById("total-price");

      cartCount.textContent = cart.length;
      whatsappBtn.style.display = cart.length > 0 ? "block" : "none";

      cartItems.innerHTML = "";
      if (cart.length === 0) {
        cartItems.innerHTML = '<p style="text-align:center; color:#aaa;">Votre panier est vide üõí</p>';
      }

      let total = 0;
      cart.forEach((item, i) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        cartItems.innerHTML += `
          <div class="cart-item">
            <h4>${item.name}</h4>
            <p>Quantit√© : 
              <button onclick="updateQuantity(${i}, -1)">-</button>
              ${item.quantity}
              <button onclick="updateQuantity(${i}, 1)">+</button>
              <button onclick="removeFromCart(${i})">‚úñ</button>
            </p>
            <p>Sous-total : ${itemTotal} DH</p>
          </div>
        `;
      });

      totalPrice.textContent = `Total : ${total} DH`;
    }

    function updateQuantity(index, delta) {
      cart[index].quantity += delta;
      if (cart[index].quantity <= 0) cart.splice(index, 1);
      renderCart();
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      renderCart();
    }

    function generateWhatsAppMessage() {
      let message = "*Commande L'gordo*%0A";
      let total = 0;
      cart.forEach(item => {
        message += `*${item.quantity} x ${item.name}*%0A`;
        const itemTotal = item.price * item.quantity;
        message += `_Sous-total: ${itemTotal} DH_%0A`;
        total += itemTotal;
      });
      message += `%0A*Total : ${total} DH*`;
      return message;
    }

    document.getElementById("whatsapp-cart-btn").addEventListener("click", () => {
      const phone = "212600000000";
      const url = `https://wa.me/${phone}?text=${generateWhatsAppMessage()}`;
      window.open(url, "_blank");
    });
  </script>
</body>
</html>
